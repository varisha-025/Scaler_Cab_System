{"ast":null,"code":"import _regeneratorRuntime from\"/Users/varisharashid/Desktop/Scaler_Cab_System-master/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/varisharashid/Desktop/Scaler_Cab_System-master/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/varisharashid/Desktop/Scaler_Cab_System-master/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{Link}from'react-router-dom';import Booking from'./Booking';import{useNavigate}from'react-router';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function BookingList(){var navigate=useNavigate();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),bookings=_useState2[0],setBookings=_useState2[1];useEffect(function(){function fetchBookings(){return _fetchBookings.apply(this,arguments);}function _fetchBookings(){_fetchBookings=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/bookings\"));case 3:response=_context.sent;if(response.statusText){_context.next=6;break;}throw new Error(\"HTTP error! Status: \".concat(response.status));case 6:_context.next=8;return response.data;case 8:data=_context.sent;setBookings(data);_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](0);console.log('Error fetching data:',{error:_context.t0.message});case 15:case\"end\":return _context.stop();}},_callee,null,[[0,12]]);}));return _fetchBookings.apply(this,arguments);}fetchBookings();},[]);var handleEditBooking=function handleEditBooking(bookingId){navigate(\"/edit-booking/\".concat(bookingId));};var handleDeleteBooking=function handleDeleteBooking(bookingId){axios.delete(\"\".concat(process.env.REACT_APP_API_URL,\"/bookings/\").concat(bookingId)).then(function(){console.log('Booking successfully deleted!');setBookings(function(prevBookings){return prevBookings.filter(function(booking){return booking._id!==bookingId;});});}).catch(function(error){console.log('Error deleting booking',error);});};return/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-5xl flex flex-col mt-16 mb-16 mx-auto p-6 bg-white rounded shadow-md\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-semibold mb-4\",children:\"All Bookings\"}),bookings.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:bookings.map(function(booking){return/*#__PURE__*/_jsx(Booking,{booking:booking,onEdit:handleEditBooking,onDelete:handleDeleteBooking},booking._id);})}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"No bookings available.\"}),/*#__PURE__*/_jsx(Link,{to:\"/addBooking\",children:/*#__PURE__*/_jsx(\"button\",{className:\"bg-blue-500 text-white rounded p-3 my-9\",children:\"Add Booking\"})})]})]});}export default BookingList;","map":{"version":3,"names":["React","useEffect","useState","Link","Booking","useNavigate","axios","jsx","_jsx","jsxs","_jsxs","BookingList","navigate","_useState","_useState2","_slicedToArray","bookings","setBookings","fetchBookings","_fetchBookings","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","data","wrap","_callee$","_context","prev","next","get","concat","process","env","REACT_APP_API_URL","sent","statusText","Error","status","t0","console","log","error","message","stop","handleEditBooking","bookingId","handleDeleteBooking","delete","then","prevBookings","filter","booking","_id","catch","className","children","length","map","onEdit","onDelete","to"],"sources":["/Users/varisharashid/Desktop/Scaler_Cab_System-master/client/src/components/AllBookings.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport Booking from './Booking';\nimport { useNavigate } from 'react-router';\nimport axios from 'axios';\n\n\nfunction BookingList() {\n    const navigate = useNavigate();\n    const [bookings, setBookings] = useState([]);\n\n    useEffect(() => {\n        async function fetchBookings() {\n            try {\n                const response = await axios.get(`${process.env.REACT_APP_API_URL}/bookings`);\n\n                if (!response.statusText) {\n                    throw new Error(`HTTP error! Status: ${response.status}`);\n                }\n\n                const data = await response.data;\n                setBookings(data);\n\n            } catch (error) {\n                console.log('Error fetching data:', { error: error.message });\n            }\n        }\n\n        fetchBookings();\n\n    }, []);\n\n\n    const handleEditBooking = (bookingId) => {\n\n        navigate(`/edit-booking/${bookingId}`);\n    };\n\n    const handleDeleteBooking = (bookingId) => {\n\n        axios.delete(`${process.env.REACT_APP_API_URL}/bookings/${bookingId}`)\n            .then(() => {\n\n                console.log('Booking successfully deleted!');\n                setBookings((prevBookings) =>\n                    prevBookings.filter((booking) => booking._id !== bookingId)\n                );\n            })\n            .catch((error) => {\n                console.log('Error deleting booking', error);\n            });\n    };\n\n    return (\n        <div className=\"max-w-5xl flex flex-col mt-16 mb-16 mx-auto p-6 bg-white rounded shadow-md\">\n            <h1 className=\"text-3xl font-semibold mb-4\">All Bookings</h1>\n            {bookings.length > 0 ? (\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                    {bookings.map((booking) => (\n                        <Booking\n                            key={booking._id}\n                            booking={booking}\n                            onEdit={handleEditBooking}\n                            onDelete={handleDeleteBooking}\n                        />\n                    ))}\n                </div>\n\n            )\n                : (\n                    <div>\n                        <p className=\"text-gray-600\">No bookings available.</p>\n                        <Link to=\"/addBooking\">\n\n                            <button className=\"bg-blue-500 text-white rounded p-3 my-9\">\n                                Add Booking\n                            </button>\n                        </Link>\n                    </div>\n\n                )}\n        </div>\n    )\n}\n\nexport default BookingList;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}